<div class="page-header">
  <h1>Schedule for Project: <%= @project.name %></h1>
</div>

<%= form_for [@project], :url => project_path(@project) do |f| %>
  <%= f.error_messages %>

  <table class="table table-striped">
    <thead>
      <tr>
        <th>Stage</th>
        <th>Date</th>
      </tr>
    </thead>
    <tbody>
      <%= f.fields_for :stages do |stage_field| %>
        <tr>
          <td><%= stage_field.object.state %></td>
          <td>
            <%= stage_field.text_field(
              :stage_start, 
              :value => stage_field.object.stage_start.to_date.to_s,
              :readonly => !stage_field.object.state.edit,
              :databehaviour => 'datepicker') %>
            <%= stage_field.hidden_field(:state_id) %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>

  <div class="form-actions">
  	<%= f.submit "Update", :class => 'btn btn-primary' %>
    <%= link_to "Cancel", project_path(@project), class: "btn" %>
  </div>
<% end %>