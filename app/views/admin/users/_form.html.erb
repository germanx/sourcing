<%= form_for [:admin, @user], :html => { :class => 'form-horizontal' } do |f| %>
<%= f.error_messages %>
  <div class="control-group">
    <%= f.label :name, :class => 'control-label' %>
    <div class="controls">
      <%= f.text_field :name %>
    </div>
  </div>

  <div class="control-group">
    <%= f.label :email, :class => 'control-label' %>
    <div class="controls">
      <%= f.text_field :email %>
    </div>
  </div>

  <div class="control-group">
    <%= f.label :password, :class => 'control-label' %>
    <div class="controls">
      <%= f.password_field :password %>
    </div>
  </div>

  <div class="control-group">
    <%= f.label :position, :class => 'control-label' %>
    <div class="controls">
      <%= f.text_field :position %>
    </div>
  </div>

  <div class="control-group">
    <%= f.label :phone, :class => 'control-label' %>
    <div class="controls">
      <%= f.text_field :phone %>
    </div>
  </div>

  <%= admins_only do %>

    <div class="control-group">
      <%= f.label :publisher, :class => 'control-label' %>
      <div class="controls">
        <%= f.check_box :publisher %>
      </div>
    </div>

    <div class="control-group">
      <%= f.label :admin, :class => 'control-label' %>
      <div class="controls">
        <%= f.check_box :admin %>
      </div>
    </div>

  <% end %>

  <div class="control-group">
    <%= f.label :firm_id, :class => 'control-label' %>
    <div class="controls">
      <% if @user.firm_id %>
      <%= @user.firm.name %>
        <input name="user[firm_id]" id="user_firm_id" type="hidden" value="<%= @user.firm_id %>">
      <% else %>    
        <%= f.collection_select(:firm_id, @current_user_firms, :id, :name) %>
      <% end %>
    </div>
  </div>

  <div class="form-actions">
    <%= f.submit nil, :class => 'btn btn-primary' %>
    <%= link_to 'Cancel', request.referer, :class => 'btn' %>
  </div>

<% end %>